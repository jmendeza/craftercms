version: "~> 1.0"
git:
  depth: 1
  quiet: true
language: java
jdk:
  - openjdk21
cache:
  directories:
    - "$HOME/.m2"
branches:
  only:
    - develop
    - support/4.1.x
    - support/4.0.x
    - master
notifications:
  slack: craftersoftware:7YiSb41ZG5rfMgiAY7Qgprc7
install: skip
script:
  - if [[ "$TRAVIS_PULL_REQUEST" == "false" ]]; then
    bash -c "mvn -DskipTests -f shared-dependencies/pom.xml deploy --settings .travis-settings.xml";
    bash -c "mvn -DskipTests deploy --settings .travis-settings.xml";
    bash -c "mvn -DskipTests -f spring-boot/pom.xml deploy --settings .travis-settings.xml";
    fi
  - if [[ "$TRAVIS_PULL_REQUEST" != "false" ]]; then
    bash -c "mvn -DskipTests -f shared-dependencies/pom.xml deploy --settings .travis-settings.xml";
    bash -c "mvn -DskipTests clean install"
    bash -c "mvn -DskipTests -f spring-boot/pom.xml clean install";
    fi
env:
  global:
    - secure: "HKNtJD27eGYA/WpuQiBKsNHDxH/DAjWLIWXzyXfPXq7t1gJjXHOLXHkUZp6BVNsKJva8yYFwLkbD8o+I98fHGQYoVwOy0kWV3By0wQEPs3TQClilL92/g9N8Pp08IXjUVBMcYIo3owbYUYxVP89o3oKWFRoSprk48WCHVTP8Uc+XffKfvofWep/GWXOdd6/rGHCgozC/dDUBfIWlyrrF0OsRVizJ4VE/WH0fIKFNfVIwOyDXiUcytufB6aPT68KmChccyACRdrydcMNUEub1s0slixXVnchK7mXUat8YEvWg8PaJ1HrR4Ouho1vJiOdgcgs8zIXnQym6b3zkQibJdXDH9PfFdGkPzPE3AI0wd4u+/b3sR7NbgHTWnesKMlwXcV/wkTFMPpqrY6Gvp07QADfWHI2/V2fxFyEIcIv04g6Jl0kcUnTGjVSN/4nVBeEgpOKqcbbEzvTnT6t9IT8hrL0hSA3UOcG6xHtjdLtt/FUPtQzLvkbebxlHJ3D4HEYUMGmZm6Dac9lPa4nCO9Z9ASzxuJpIHXwhPon+cKdlVZj8giI8Cdg/Bh2c8LmKQ+hbIFxy8adrb5uLpNHOd/5Yduwv2vYz0liMG37DkRVZufjZ3AIxK/pc93qeNACce6T5fi0CIZIyDNTdCsiMeAau2mZnB/P0q26rWGB0RPdX3TA="
    - secure: "gNzHas4tRGhhhF8bQsj14TlyD/9t6pR1z6aq4Hp86W+W9S1Okh0ylKH/KWwVzwdmq1lnAI0wThqN2ZDNZjABe160ZHHnUWO49Df+YqigT/sZlcTga/p/cpFxTqGq9LcuTf4r50+YHcj/CiylIx6gtaIztssG+418R+JmkgVB3Jak3tX+uQqaFsOQmZK+A2I77oREw3gcCyKhRByNpC5NH5OfftZ0XhpBLoljBUlJ1CuVh5JZTUEjm/6RBIdU0gRkTnH0u419gh23qr8oEA5DgXdYeXHS2MEgkPR8eY2qJMUb08/XCLru7gCqvoFgVRreEOmQol3YNGH2EYLXOH0rSMANcxaX0ZbAeTAZr9q2XdnOACHT9pqGytP6uUOdS4ZzaLIS9i2RCknIe4zb+Rmgq4Mi1QuAQvJ6biazUYbh6j0bSGTehVyp4sQxz2KvYwpWMl9u4FxhoT7cD6oYgA5UxZnU4vHPpgFxlpNb9d2t0uy7AQHCt4hA+q3mU4DR07FiOokODD7i3yRsBhhPgvNOM1KXaEXQcT5rCX3e9OWODi1iE+GglbQPfaCgKjqq7B7ZjYr1fgH6eA6CPU6hqyh+vfifEMRKmqI2j/0QSXfptQ6iRPIcY+/Y05uKl9eJwwz7YR2qIjrHRV72kwNKCnDPOVE2AjDTWHG0hlmsgQBRqG4="
